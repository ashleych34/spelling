<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spelling Bee Quiz</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #007bff; --success: #28a745; --danger: #dc3545; --bg: #f0f8ff; }
        body { font-family: -apple-system, system-ui, sans-serif; background-color: var(--bg); display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
        
        .quiz-container { width: 100%; max-width: 500px; background: white; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); padding: 25px; text-align: center; }
        
        h1 { margin: 0 0 10px 0; color: #333; font-size: 1.5rem; }
        .score-board { font-size: 1rem; color: #666; margin-bottom: 20px; font-weight: bold; }
        
        .question-text { font-size: 1.3rem; font-weight: 600; color: #222; margin-bottom: 25px; line-height: 1.4; }
        .hint-text { font-size: 0.9rem; color: #888; margin-bottom: 20px; font-style: italic; }

        .options-grid { display: flex; flex-direction: column; gap: 12px; }
        
        .btn-option {
            background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px;
            padding: 15px; font-size: 1.1rem; color: #333; cursor: pointer;
            transition: all 0.2s; font-weight: 500; text-align: left;
        }
        .btn-option:hover { border-color: var(--primary); background: #e7f1ff; }
        
        /* Feedback States */
        .btn-option.correct { background: #d4edda; border-color: var(--success); color: #155724; }
        .btn-option.wrong { background: #f8d7da; border-color: var(--danger); color: #721c24; opacity: 0.7; }
        
        .rationale-box {
            margin-top: 20px; padding: 15px; border-radius: 10px; background: #e2e3e5;
            color: #383d41; font-size: 0.95rem; line-height: 1.4; text-align: left; display: none;
        }
        
        .btn-next {
            margin-top: 20px; padding: 15px 30px; background: var(--primary); color: white;
            border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold;
            cursor: pointer; width: 100%; display: none;
        }
        .btn-next:hover { background: #0056b3; }

        /* Navigation Home Button */
        .home-link { margin-top: 20px; color: #007bff; text-decoration: none; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="quiz-container">
        <h1>üìù Spelling Quiz</h1>
        <div class="score-board" id="scoreBoard">Score: 0 / 0</div>
        
        <div id="gameArea">
            <div class="question-text" id="questionText">Loading...</div>
            <div class="hint-text" id="hintText"></div>
            
            <div class="options-grid" id="optionsGrid">
                </div>

            <div class="rationale-box" id="rationaleBox"></div>
            <button class="btn-next" id="nextBtn" onclick="nextQuestion()">Next Question ‚û°Ô∏è</button>
        </div>

        <div id="endScreen" style="display: none;">
            <h2>üéâ Quiz Complete!</h2>
            <p style="font-size: 1.2rem;">Your Final Score:</p>
            <h1 style="font-size: 3rem; color: var(--primary);" id="finalScore">0</h1>
            <button class="btn-next" style="display: block;" onclick="location.reload()">Try Again üîÑ</button>
            <br>
            <a href="index.html" class="btn-next" style="display: block; background: #6c757d; text-decoration: none;">Back to Flashcards</a>
        </div>
    </div>

    <a href="index.html" class="home-link">‚Üê Back to Flashcards</a>

    <script>
        // DATA: The 20 questions we generated earlier
        const questions = [
            {
                q: "Which word correctly fills in the blank?\n\"Please do not ______ to ask for help if you are confused.\"",
                hint: "To pause briefly because you are unsure.",
                options: [
                    { t: "hesitate", r: "Correct! To pause before acting.", c: true },
                    { t: "hesatate", r: "Incorrect. The middle vowel is 'i', not 'a'.", c: false },
                    { t: "hesetate", r: "Incorrect. It is spelled 'h-e-s-i'.", c: false },
                    { t: "hesitait", r: "Incorrect. The suffix is '-ate'.", c: false }
                ]
            },
            {
                q: "If something is broken into small pieces, we call those pieces ______.",
                hint: "Sounds like 'frag-ments'.",
                options: [
                    { t: "fragments", r: "Correct! Small broken parts.", c: true },
                    { t: "fragmants", r: "Incorrect. The suffix uses 'e' (ments).", c: false },
                    { t: "fragmints", r: "Incorrect. Not spelled like a breath 'mint'.", c: false },
                    { t: "flagments", r: "Incorrect. Starts with 'fr', not 'fl'.", c: false }
                ]
            },
            {
                q: "Which word describes a light brown or yellowish-gray color?",
                hint: "Starts with 'b', French origin.",
                options: [
                    { t: "beige", r: "Correct! Remember 'e' before 'i' for this word.", c: true },
                    { t: "biege", r: "Incorrect. This word breaks the 'i before e' rule.", c: false },
                    { t: "bage", r: "Incorrect. Too simple!", c: false },
                    { t: "baige", r: "Incorrect. Needs an 'ei' combination.", c: false }
                ]
            },
            {
                q: "Choose the correct spelling for the hair grown on a man's upper lip.",
                hint: "Ends with a 'che' sound spelled 'che'.",
                options: [
                    { t: "mustache", r: "Correct!", c: true },
                    { t: "mustash", r: "Incorrect. Ends in 'che', not 'sh'.", c: false },
                    { t: "mostache", r: "Incorrect. Starts with 'mu', not 'mo'.", c: false },
                    { t: "mustach", r: "Incorrect. Needs a silent 'e' at the end.", c: false }
                ]
            },
            {
                q: "What is the correct spelling for a very large wild animal of the cow family?",
                hint: "Double 'f', single 'l'.",
                options: [
                    { t: "Buffalo", r: "Correct!", c: true },
                    { t: "Buffalow", r: "Incorrect. No 'w' at the end.", c: false },
                    { t: "Buffolo", r: "Incorrect. Second vowel is 'a'.", c: false },
                    { t: "Bufalo", r: "Incorrect. Needs double 'f'.", c: false }
                ]
            },
            {
                q: "Which word means 'extraordinary' or 'especially good'?",
                hint: "Ends in '-ous'.",
                options: [
                    { t: "fabulous", r: "Correct!", c: true },
                    { t: "fabulis", r: "Incorrect. Suffix is '-ous'.", c: false },
                    { t: "fabelous", r: "Incorrect. No 'e' in the middle.", c: false },
                    { t: "fabullous", r: "Incorrect. Only one 'l'.", c: false }
                ]
            },
            {
                q: "Which word describes a tall and thin person with long limbs?",
                hint: "Rhymes with 'thanky'.",
                options: [
                    { t: "lanky", r: "Correct!", c: true },
                    { t: "lankey", r: "Incorrect. No 'e' before 'y'.", c: false },
                    { t: "lancky", r: "Incorrect. No 'c' needed.", c: false },
                    { t: "lenky", r: "Incorrect. Vowel is 'a'.", c: false }
                ]
            },
            {
                q: "Complete the sentence: \"The wizard wore a tall, ______ hat.\"",
                hint: "Shaped like a cone.",
                options: [
                    { t: "conical", r: "Correct!", c: true },
                    { t: "conicle", r: "Incorrect. Ends in '-ical'.", c: false },
                    { t: "connicel", r: "Incorrect. Only one 'n'.", c: false },
                    { t: "coneical", r: "Incorrect. Drop the 'e' from cone.", c: false }
                ]
            },
            {
                q: "Which word refers to the medical care of children?",
                hint: "Starts with 'pedi-'.",
                options: [
                    { t: "pediatric", r: "Correct!", c: true },
                    { t: "pedeatric", r: "Incorrect. 'dia', not 'dea'.", c: false },
                    { t: "pediatrick", r: "Incorrect. Ends in 'c', not 'ck'.", c: false },
                    { t: "peediatric", r: "Incorrect. Single 'e'.", c: false }
                ]
            },
            {
                q: "If you look through a messy drawer to find something, you ______ through it.",
                hint: "Double 'm', ends in '-age'.",
                options: [
                    { t: "rummage", r: "Correct!", c: true },
                    { t: "rumage", r: "Incorrect. Needs double 'm'.", c: false },
                    { t: "rummidge", r: "Incorrect. Suffix is '-age'.", c: false },
                    { t: "rommage", r: "Incorrect. Starts with 'ru'.", c: false }
                ]
            }
        ];

        let currentIdx = 0;
        let score = 0;
        let answered = false;

        function loadQuestion() {
            answered = false;
            const qData = questions[currentIdx];
            
            document.getElementById('questionText').innerText = qData.q;
            document.getElementById('hintText').innerText = "üí° Hint: " + qData.hint;
            document.getElementById('scoreBoard').innerText = `Question ${currentIdx + 1} / ${questions.length} | Score: ${score}`;
            document.getElementById('rationaleBox').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';

            const grid = document.getElementById('optionsGrid');
            grid.innerHTML = '';

            // Shuffle options for randomness
            const shuffledOptions = [...qData.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn-option';
                btn.innerText = opt.t;
                btn.onclick = () => checkAnswer(btn, opt);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(btn, optionData) {
            if (answered) return; // Prevent double clicking
            answered = true;

            const rationaleBox = document.getElementById('rationaleBox');
            rationaleBox.style.display = 'block';
            rationaleBox.innerText = (optionData.c ? "‚úÖ " : "‚ùå ") + optionData.r;

            if (optionData.c) {
                btn.classList.add('correct');
                score++;
                triggerConfetti();
            } else {
                btn.classList.add('wrong');
                // Highlight the correct one automatically
                const allBtns = document.querySelectorAll('.btn-option');
                allBtns.forEach(b => {
                    if (questions[currentIdx].options.find(o => o.t === b.innerText && o.c)) {
                        b.classList.add('correct');
                    }
                });
            }
            
            document.getElementById('scoreBoard').innerText = `Question ${currentIdx + 1} / ${questions.length} | Score: ${score}`;
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            currentIdx++;
            if (currentIdx < questions.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('endScreen').style.display = 'block';
            document.getElementById('finalScore').innerText = `${score} / ${questions.length}`;
            triggerConfetti();
            setTimeout(triggerConfetti, 500);
        }

        function triggerConfetti() {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        }

        // Start
        loadQuestion();

    </script>
</body>
</html>
